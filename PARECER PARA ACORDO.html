<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Formulário - Preenchimento de Processo</title>
<style>
    body {
      font-family: Calibri, sans-serif;
      font-size: 14px;
      background-color: #f8f8f8;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 650px;
      margin: 30px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 6px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
    }
    label {
      display: block;
      font-weight: bold;
      margin: 10px 0 5px;
    }
    textarea,
    input[type="text"],
    input[type="date"],
    select {
      width: 100%;
      padding: 6px 10px;
      margin-bottom: 10px;
      font-size: 14px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    fieldset {
      border: 1px solid #ccc;
      padding: 15px 20px;
      margin-bottom: 20px;
      border-radius: 5px;
    }
    legend {
      font-weight: bold;
      padding: 0 5px;
    }
    input[type="submit"] {
      background-color: #4CAF50;
      color: white;
      padding: 10px 15px;
      border: none;
      cursor: pointer;
      border-radius: 4px;
      font-size: 14px;
    }
    input[type="submit"]:hover {
      background-color: #45a049;
    }
    .alert {
      color: red;
      font-weight: bold;
      margin-left: 10px;
      display: inline;
    }
  
    .red-button {
      background-color: #000000;
      color: white;
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      margin: 5px 0;
    }
    </style>
</head>
<body>
<div class="container">
<h2>FORMULÁRIO PARA APROVAÇÃO DE PROPOSTA</h2>
<form action="#" method="post">
<fieldset>
<legend><b>INFORMAÇÕES BÁSICAS</b></legend>
<label for="gcpj">GCPJ:</label>
<input id="gcpj" name="gcpj" required="" type="text"/>
<label for="cliente">CLIENTE:</label>
<input id="cliente" name="cliente" required="" type="text"/>
<label for="cpfCnpj">CPF/CNPJ:</label>
<input id="cpfCnpj" name="cpfCnpj" required="" type="text"/>
<label for="tipoPessoa">PESSOA FÍSICA OU JURÍDICA:</label>
<select id="tipoPessoa" name="tipoPessoa" required="">
<option value="">Selecione</option>
<option value="Pessoa Física">Pessoa Física</option>
<option value="Pessoa Jurídica">Pessoa Jurídica</option>
</select>
<label for="status">STATUS CNPJ/CPF:</label>
<input id="status" name="status" required="" type="text"/>
</fieldset>
<fieldset>
<legend><b>SOBRE O CONTRATO</b></legend>
<label for="agencia">AGÊNCIA:</label>
<input id="agencia" name="agencia" required="" type="text"/>
<label for="conta">CONTA:</label>
<input id="conta" name="conta" required="" type="text"/>
<label for="carteira">CARTEIRA:</label>
<input id="carteira" name="carteira" required="" type="text"/>
<label for="contrato">CONTRATO:</label>
<input id="contrato" name="contrato" required="" type="text"/>
<label for="documentos">DOCUMENTOS ENVIADOS PELA AGÊNCIA:</label>
<input id="documentos" name="documentos" required="" type="text"/>
<label for="garantia">TIPO DE GARANTIA:</label>
<select id="garantia" name="garantia" required="">
<option value="">Selecione</option>
<option value="Bem">Bem</option>
<option value="Avalista">Avalista</option>
<option value="Outros">Outros</option>
</select>
<label for="descricaoGarantia">DESCRIÇÃO DA GARANTIA:</label>
<textarea id="descricaoGarantia" name="descricaoGarantia" required="" rows="4"></textarea>
</fieldset>
<fieldset>
<legend><b>SOBRE O PROCESSO</b></legend>
<label for="numeroProcesso">NÚMERO DO PROCESSO:</label>
<input id="numeroProcesso" name="numeroProcesso" required="" type="text"/>
<label for="varaComarca">VARA/COMARCA:</label>
<input id="varaComarca" name="varaComarca" required="" type="text"/>
<label for="valorCausa">VALOR DA CAUSA:</label>
<input id="valorCausa" name="valorCausa" required="" type="text"/>
<label for="tipoAcao">TIPO DE AÇÃO:</label>
<select id="tipoAcao" name="tipoAcao" required="">
<option value="">Selecione</option>
<option value="Ação de Busca e Apreensão">Ação de Busca e Apreensão</option>
<option value="Ação Monitória">Ação Monitória</option>
<option value="Ação de Cobrança">Ação de Cobrança</option>
<option value="Ação de Reintegração de Posse">Ação de Reintegração de Posse</option>
<option value="Execução de Título Extrajudicial">Execução de Título Extrajudicial</option>
<option value="Extrajudicial">Extrajudicial</option>
</select>
<label for="motivoAcao">MOTIVO DO TIPO DE AÇÃO:</label>
<input id="motivoAcao" name="motivoAcao" required="" type="text"/>
<label for="dataAjui">DATA DO AJUIZAMENTO:</label>
<input id="dataAjui" name="dataAjui" required="" type="date"/>
<label for="citacao">CITAÇÃO:</label>
<select id="citacao" name="citacao" required="">
<option value="">Selecione</option>
<option value="cliente citado">Cliente citado</option>
<option value="cliente não citado">Cliente não citado</option>
</select>
<label for="dataCitacao" id="dataCitacaoLabel" style="display: none">DATA DA CITAÇÃO:</label>
<input id="dataCitacao" name="dataCitacao" style="display: none" type="date"/>
<label for="situacao">ATUAL SITUAÇÃO DO PROCESSO:</label>
<input id="situacao" name="situacao" required="" type="text"/>
<label for="bloqueioJudicial">HOUVE BLOQUEIO JUDICIAL:</label>
<select id="bloqueioJudicial" name="bloqueioJudicial" required="">
<option value="">Selecione</option>
<option value="SIM">SIM</option>
<option value="NÃO">NÃO</option>
</select>
<label for="valorBloqueado">Qual foi o valor bloqueado ou qual o bem localizado (se aplicável):</label>
<input disabled="" id="valorBloqueado" name="valorBloqueado" type="text"/>
</fieldset>
<fieldset>
<legend><b>OUTRAS INFORMAÇÕES</b></legend>
<label for="pesquisaBens">PESQUISA DE BENS:</label>
<select id="pesquisaBens" name="pesquisaBens" required="">
<option value="">Selecione</option>
<option value="SIM">SIM</option>
<option value="NÃO">NÃO</option>
</select><span class="alert" id="alertaPesquisa" style="display: none;"> ⚠️ Nenhuma pesquisa de bens foi realizada.</span>
<label for="bemLocalizado">BEM LOCALIZADO:</label>
<input id="bemLocalizado" name="bemLocalizado" type="text"/>
<label for="relatorioCip">RELATÓRIO DA CIP / INVESTIGAÇÃO PATRIMONIAL BRADESCO:</label>
<select id="relatorioCip" name="relatorioCip">
<option value="">Selecione</option>
<option value="SIM">SIM</option>
<option value="NÃO">NÃO</option>
</select>
<label for="resultadoPesquisa">RESULTADO DA PESQUISA PATRIMONIAL BRADESCO:</label>
<input disabled="" id="resultadoPesquisa" name="resultadoPesquisa" type="text"/>
<label for="advogado">ADVOGADO CONSTITUÍDO:</label>
<select id="advogado" name="advogado">
<option value="">Selecione</option>
<option value="SIM">SIM</option>
<option value="NÃO">NÃO</option>
</select>
<label for="nomeAdvogado">NOME DO ADVOGADO E OAB (se aplicável):</label>
<input disabled="" id="nomeAdvogado" name="nomeAdvogado" type="text"/>
<label for="processosVinculados">PROCESSOS VINCULADOS:</label>
<select id="processosVinculados" name="processosVinculados">
<option value="">Selecione</option>
<option value="SIM">SIM</option>
<option value="NÃO">NÃO</option>
</select>
<div id="containerProcessos" style="display:none; margin-top:10px;">
<div id="processosLista"></div>
<button class="red-button" onclick="adicionarProcesso()" style="background-color: #000000;" type="button">Adicionar Item</button>
</div>
</fieldset>
<div style="text-align: center; margin-bottom: 20px;"><input style="; margin-bottom: 15px;" type="submit" value="Gerar Parecer"/><button onclick="window.print()" style="
  background-color: #007BFF;
  color: white;
  padding: 10px 15px;
  border: none;
  cursor: pointer;
  border-radius: 4px;
  font-size: 14px;
  margin-left: 10px;
; margin-bottom: 15px; margin-left: 10px;" type="button">Imprimir Formulário</button><button style="background-color: #c0392b; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; margin-left: 10px;" type="reset">Limpar Formulário</button>
<button onclick="salvarComoTxt()" style="background-color: orange; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; margin-left: 10px;" type="button">Salvar Como</button>
</div>
<fieldset>
<legend><b>PONTOS POSITIVOS E NEGATIVOS DA AÇÃO</b></legend>
<label for="pontosPositivos">✔️ Pontos Positivos:</label>
<textarea id="pontosPositivos" name="pontosPositivos" rows="5" placeholder="Ex: Contrato assinado pelo cliente&#10;Pedido de arresto executivo pendente de deferimento"></textarea>
<label for="pontosNegativos">❌ Pontos Negativos:</label>
<textarea id="pontosNegativos" name="pontosNegativos" rows="7" placeholder="Ex: Empresa suspensa junto à Receita Federal&#10;Contrato sem garantia"></textarea>
</fieldset>

<fieldset>
<legend><b>PARECER DO ESCRITÓRIO - ESBOÇO, ALTERAR SE NECESSÁRIO</b></legend>
<textarea cols="50" id="parecer" name="parecer" rows="6">Aqui vai o parecer, você pode alterá-lo manualmente.</textarea>
</fieldset>
<fieldset>
<legend><b>RESUMO DAS INFORMAÇÕES</b></legend>
<textarea cols="50" id="resumo" name="resumo" readonly="" rows="25"></textarea>
</fieldset>
</form>
</div>
<script>
    document.getElementById("citacao").addEventListener("change", function () {
      var label = document.getElementById("dataCitacaoLabel");
      var campo = document.getElementById("dataCitacao");
      if (this.value === "cliente citado") {
        label.style.display = campo.style.display = "inline-block";
      } else {
        label.style.display = campo.style.display = "none";
      }
    });

    document.getElementById("bloqueioJudicial").addEventListener("change", function () {
      document.getElementById("valorBloqueado").disabled = this.value !== "SIM";
    });

    document.getElementById("advogado").addEventListener("change", function () {
      document.getElementById("nomeAdvogado").disabled = this.value !== "SIM";
    });

    document.getElementById("pesquisaBens").addEventListener("change", function () {
      var alerta = document.getElementById("alertaPesquisa");
      if (this.value === "NÃO") {
        this.style.color = "red";
        this.style.fontWeight = "bold";
        alerta.style.display = "inline";
      } else {
        this.style.color = "";
        this.style.fontWeight = "";
        alerta.style.display = "none";
      }
    });

    document.getElementById("relatorioCip").addEventListener("change", function () {
      document.getElementById("resultadoPesquisa").disabled = this.value !== "SIM";
    });

    
      function formatarDataExtenso(dataISO) {
        if (!dataISO) return "-";
        const data = new Date(dataISO + "T00:00:00");
        const meses = ['janeiro','fevereiro','março','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'];
        return `${data.getDate()} de ${meses[data.getMonth()]} de ${data.getFullYear()}`;
      }
      
      document.querySelector("form").addEventListener("submit", function (event) {
      document.getElementById("resumo").value = "";
      document.getElementById("parecer").value = "";
      event.preventDefault();

      let campos = this.querySelectorAll("input, select, textarea");
      let resumo = "";

      campos.forEach(campo => {
        if (campo.type !== "submit" && campo.name && campo.offsetParent !== null) {
          const label = this.querySelector(`label[for="${campo.id}"]`);
          const nome = label ? label.innerText.replace(":", "") : campo.name;
          const valor = campo.type === "date" ? formatarDataExtenso(campo.value) : (campo.value || "-");
          resumo += `${nome.replace(/\[.*?\]/g, "")}: ${valor}\n`;
        }
      });

      document.getElementById("resumo").value = resumo;

      const tipoAcao = document.getElementById("tipoAcao").value;
      const dataAjui = document.getElementById("dataAjui").value;
      const carteira = document.getElementById("carteira").value;
      const contrato = document.getElementById("contrato").value;
      const valorCausa = document.getElementById("valorCausa").value;
      const situacao = document.getElementById("situacao").value;

      const parecer = `${tipoAcao} ajuizada em ${formatarDataExtenso(dataAjui)} para efetuar a cobrança do contrato n.º ${carteira}/${contrato}, com o valor da causa em ${valorCausa}. Atualmente o processo está ${situacao}.

Diante da proposta de acordo apresentada, somos favoráveis à sua aceitação, considerando que a composição amigável representa uma alternativa eficaz para encerramento célere do processo, redução de custos judiciais e mitigação de riscos decorrentes da continuidade da demanda.

A proposta demonstra viabilidade jurídica e econômica, preservando os interesses do Banco Bradesco S/A e evitando desdobramentos que poderiam gerar maiores prejuízos ou instabilidade no curso da ação.

Sendo assim, solicitamos autorização para elaboração do acordo, observadas as condições propostas.`;

      document.getElementById("parecer").value = parecer;


const pontosPositivos = document.getElementById("pontosPositivos").value;
const pontosNegativos = document.getElementById("pontosNegativos").value;
const blocosPN = `
✔️ Pontos Positivos:
${pontosPositivos}

❌ Pontos Negativos:
${pontosNegativos}
`;

const parecerFinal = `${parecer}

${blocosPN}`;
document.getElementById("parecer").value = parecerFinal;

    });
  
    document.getElementById("processosVinculados").addEventListener("change", function () {
      const container = document.getElementById("containerProcessos");
      container.style.display = this.value === "SIM" ? "block" : "none";
    });

    function adicionarProcesso() {
      const div = document.createElement("div");
      div.className = "item-processo";
      div.innerHTML = `
        <label>PROCESSO:</label>
        <input type="text" name="processo[]">
        <label>GCPJ:</label>
        <input type="text" name="gcpjProcesso[]">
        <label>ESCRITÓRIO CONTRATADO:</label>
        <input type="text" name="escritorioProcesso[]">
        <label>ANDAMENTO:</label>
        <input type="text" name="andamentoProcesso[]">
        <button type="button" class="red-button" onclick="this.parentElement.remove()">Remover</button>
        <hr />
      `;
      document.getElementById("processosLista").appendChild(div);
    }

    const originalSubmitHandler = document.querySelector("form").onsubmit;
    
      function formatarDataExtenso(dataISO) {
        if (!dataISO) return "-";
        const data = new Date(dataISO + "T00:00:00");
        const meses = ['janeiro','fevereiro','março','abril','maio','junho','julho','agosto','setembro','outubro','novembro','dezembro'];
        return `${data.getDate()} de ${meses[data.getMonth()]} de ${data.getFullYear()}`;
      }
      
      document.querySelector("form").addEventListener("submit", function (event) {
      document.getElementById("resumo").value = "";
      document.getElementById("parecer").value = "";
      event.preventDefault();

      let campos = this.querySelectorAll("input, select, textarea");
      let resumo = "";

      campos.forEach(campo => {
        if (campo.type !== "submit" && campo.name && campo.offsetParent !== null) {
          const label = this.querySelector(`label[for="${campo.id}"]`);
          const nome = label ? label.innerText.replace(":", "") : campo.name;
          const valor = campo.type === "date" ? formatarDataExtenso(campo.value) : (campo.value || "-");
          resumo += `${nome.replace(/\[.*?\]/g, "")}: ${valor}\n`;
        }
      });

      if (document.getElementById("processosVinculados").value === "SIM") {
        const itens = document.querySelectorAll(".item-processo");
        itens.forEach((item, index) => {
          const processo = item.querySelector('input[name="processo[]"]').value;
          const gcpj = item.querySelector('input[name="gcpjProcesso[]"]').value;
          const escritorio = item.querySelector('input[name="escritorioProcesso[]"]').value;
          const andamento = item.querySelector('input[name="andamentoProcesso[]"]').value;
          resumo += `\nItem Vinculado ${index + 1}:\nPROCESSO: ${processo}\nGCPJ: ${gcpj}\nESCRITÓRIO CONTRATADO: ${escritorio}\nANDAMENTO: ${andamento}\n`;
        });
      }

      document.getElementById("resumo").value = resumo;

      // reaproveita lógica anterior
      const tipoAcao = document.getElementById("tipoAcao").value;
      const dataAjui = document.getElementById("dataAjui").value;
      const carteira = document.getElementById("carteira").value;
      const contrato = document.getElementById("contrato").value;
      const valorCausa = document.getElementById("valorCausa").value;
      const situacao = document.getElementById("situacao").value;

      const parecer = `${tipoAcao} ajuizada em ${formatarDataExtenso(dataAjui)} para efetuar a cobrança do contrato n.º ${carteira}/${contrato}, com o valor da causa em ${valorCausa}. Atualmente o processo está ${situacao}.

Diante da proposta de acordo apresentada, somos favoráveis à sua aceitação, considerando que a composição amigável representa uma alternativa eficaz para encerramento célere do processo, redução de custos judiciais e mitigação de riscos decorrentes da continuidade da demanda.

A proposta demonstra viabilidade jurídica e econômica, preservando os interesses do Banco Bradesco S/A e evitando desdobramentos que poderiam gerar maiores prejuízos ou instabilidade no curso da ação.

Sendo assim, solicitamos autorização para elaboração do acordo, observadas as condições propostas.`;

      document.getElementById("parecer").value = parecer;


const pontosPositivos = document.getElementById("pontosPositivos").value;
const pontosNegativos = document.getElementById("pontosNegativos").value;
const blocosPN = `
✔️ Pontos Positivos:
${pontosPositivos}

❌ Pontos Negativos:
${pontosNegativos}
`;

const parecerFinal = `${parecer}

${blocosPN}`;
document.getElementById("parecer").value = parecerFinal;

    });
    </script>

<script>
  function salvarComoTxt() {
    const resumo = document.getElementById("resumo").value;
    const parecer = document.getElementById("parecer").value;

    const conteudo = `PARECER:\n${parecer}\n\nRESUMO DAS INFORMAÇÕES:\n${resumo}`;
    const blob = new Blob([conteudo], { type: "text/plain;charset=utf-8" });

    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "parecer_resumo.txt";
    link.click();
  }
</script>

</body>
</html>
